keybindings = [
    # Swap Left Windows (Super) with Left Alt
    0x5B, 0xA4, # Left Windows -> Left Alt
    0xA4, 0x5B, # Left Alt -> Left Windows

    # Swap Right Windows (Super) with Right Alt
    0x5C, 0xA5, # Right Windows -> Right Alt
    0xA5, 0x5C, # Right Alt -> Right Windows
]

# Use KMS capture instead of XDG portal (requires cap_sys_admin on sunshine binary)
capture = kms
{{- if eq .chezmoi.os "linux" }}
{{- $nvidiaCard := "" }}
{{- range $i := list "0" "1" "2" "3" }}
{{-   $driverPath := printf "/sys/class/drm/card%s/device/driver" $i }}
{{-   if stat $driverPath }}
{{-     $driver := output "basename" (output "readlink" "-f" $driverPath | trim) | trim }}
{{-     if eq $driver "nvidia" }}
{{-       $nvidiaCard = printf "/dev/dri/card%s" $i }}
{{-     end }}
{{-   end }}
{{- end }}
{{- if and $nvidiaCard (stat "/dev/dri/card1") }}

# Hybrid GPU detected - use NVIDIA card for capture
adapter_name = {{ $nvidiaCard }}
{{- end }}
{{- end }}
